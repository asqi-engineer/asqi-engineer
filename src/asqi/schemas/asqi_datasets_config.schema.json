{
  "$defs": {
    "DatasetLoaderParams": {
      "description": "Parameters for loading a HuggingFace dataset.\n\nSupports two mutually exclusive modes:\n- Hub mode: Load from HuggingFace Hub using `hub_path`\n- Local mode: Load from local files using `builder_name` with `data_dir` or `data_files`",
      "properties": {
        "hub_path": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "HuggingFace Hub dataset path (e.g., 'detection-datasets/coco'). Mutually exclusive with builder_name.",
          "title": "Hub Path"
        },
        "name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Configuration name for multi-config Hub datasets (e.g., 'default', '2017').",
          "title": "Name"
        },
        "split": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Dataset split to load (e.g., 'train', 'validation', 'test'). Defaults to 'train' if not specified.",
          "title": "Split"
        },
        "trust_remote_code": {
          "default": false,
          "description": "Allow execution of remote code from HuggingFace Hub datasets. Only set to True for trusted datasets.",
          "title": "Trust Remote Code",
          "type": "boolean"
        },
        "builder_name": {
          "anyOf": [
            {
              "enum": [
                "json",
                "csv",
                "parquet",
                "arrow",
                "text",
                "xml",
                "webdataset",
                "imagefolder",
                "audiofolder",
                "videofolder"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "The dataset builder name for local files. Gets passed to datasets.load_dataset() as the path argument. Mutually exclusive with hub_path.",
          "title": "Builder Name"
        },
        "data_dir": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Directory containing dataset files, relative to the input mount.",
          "title": "Data Dir"
        },
        "data_files": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Single file path or list of file paths, relative to the input mount.",
          "title": "Data Files"
        },
        "revision": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Git revision (commit hash, tag, or branch) for HuggingFace Hub datasets. Recommended for reproducibility when using hub_path.",
          "title": "Revision"
        },
        "streaming": {
          "default": false,
          "description": "Enable streaming mode to avoid loading entire dataset into memory. Returns IterableDataset instead of Dataset. Recommended for large datasets.",
          "title": "Streaming",
          "type": "boolean"
        },
        "token": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "HuggingFace token for accessing private datasets. If not provided, falls back to HF_TOKEN environment variable.",
          "title": "Token"
        }
      },
      "title": "DatasetLoaderParams",
      "type": "object"
    },
    "HFDatasetDefinition": {
      "description": "Defines a reusable HuggingFace dataset that can be referenced by name in test suites and generation jobs.",
      "properties": {
        "type": {
          "const": "huggingface",
          "description": "Dataset type identifier for HuggingFace datasets.",
          "title": "Type",
          "type": "string"
        },
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Human-readable description of the dataset's purpose and contents.",
          "title": "Description"
        },
        "loader_params": {
          "$ref": "#/$defs/DatasetLoaderParams",
          "description": "Configuration for loading the dataset from files or directories."
        },
        "mapping": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Optional mapping from existing dataset column names to their required names in manifest i.e. current_name: manifest_name.",
          "title": "Mapping",
          "type": "object"
        },
        "label_map": {
          "anyOf": [
            {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional mapping from class IDs to class names for CV datasets (e.g., {0: 'person', 1: 'car'}). Used by detection and classification containers to match predictions with ground truth labels.",
          "title": "Label Map"
        },
        "tags": {
          "description": "Optional tags for categorization (e.g., ['evaluation', 'en']).",
          "items": {
            "type": "string"
          },
          "title": "Tags",
          "type": "array"
        }
      },
      "required": [
        "type",
        "loader_params"
      ],
      "title": "HFDatasetDefinition",
      "type": "object"
    },
    "PDFDatasetDefinition": {
      "description": "Defines a PDF document dataset that can be referenced by name in test suites and generation jobs.",
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Human-readable description of the dataset's purpose and contents.",
          "title": "Description"
        },
        "file_path": {
          "description": "Path to the input file, relative to the input mount. Can be a local path or remote URL depending on container support.",
          "title": "File Path",
          "type": "string"
        },
        "tags": {
          "description": "Optional tags for categorization (e.g., ['evaluation', 'en']).",
          "items": {
            "type": "string"
          },
          "title": "Tags",
          "type": "array"
        },
        "type": {
          "const": "pdf",
          "description": "Dataset type identifier for PDF documents.",
          "title": "Type",
          "type": "string"
        }
      },
      "required": [
        "file_path",
        "type"
      ],
      "title": "PDFDatasetDefinition",
      "type": "object"
    },
    "TXTDatasetDefinition": {
      "description": "Defines a plain text file dataset that can be referenced by name in test suites and generation jobs.",
      "properties": {
        "description": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Human-readable description of the dataset's purpose and contents.",
          "title": "Description"
        },
        "file_path": {
          "description": "Path to the input file, relative to the input mount. Can be a local path or remote URL depending on container support.",
          "title": "File Path",
          "type": "string"
        },
        "tags": {
          "description": "Optional tags for categorization (e.g., ['evaluation', 'en']).",
          "items": {
            "type": "string"
          },
          "title": "Tags",
          "type": "array"
        },
        "type": {
          "const": "txt",
          "description": "Dataset type identifier for plain text files.",
          "title": "Type",
          "type": "string"
        }
      },
      "required": [
        "file_path",
        "type"
      ],
      "title": "TXTDatasetDefinition",
      "type": "object"
    }
  },
  "description": "Schema for datasets configuration file.\n\nDatasets are defined in a dictionary where keys are dataset names.\nEach dataset must specify a 'type' field that determines its schema:\n- 'huggingface': HuggingFace datasets with loader_params\n- 'pdf': PDF document datasets with file_path\n- 'txt': Plain text file datasets with file_path",
  "properties": {
    "datasets": {
      "additionalProperties": {
        "discriminator": {
          "mapping": {
            "huggingface": "#/$defs/HFDatasetDefinition",
            "pdf": "#/$defs/PDFDatasetDefinition",
            "txt": "#/$defs/TXTDatasetDefinition"
          },
          "propertyName": "type"
        },
        "oneOf": [
          {
            "$ref": "#/$defs/HFDatasetDefinition"
          },
          {
            "$ref": "#/$defs/PDFDatasetDefinition"
          },
          {
            "$ref": "#/$defs/TXTDatasetDefinition"
          }
        ]
      },
      "description": "Dictionary of dataset definitions, keyed by dataset name. Each definition can be HFDatasetDefinition, PDFDatasetDefinition, or TXTDatasetDefinition (discriminated by 'type' field).",
      "title": "Datasets",
      "type": "object"
    }
  },
  "required": [
    "datasets"
  ],
  "title": "ASQI DatasetsConfig",
  "type": "object",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}